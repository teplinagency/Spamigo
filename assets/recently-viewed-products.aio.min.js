/*
Generated time: October 28, 2024 01:50
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("recently-viewed-products")){class a extends HTMLElement{constructor(){var e;super(),this.url=theme.routes.search_url+"?view=recently-viewed&type=product&q=",this.container=this.querySelector(".products"),this.currentId=this.dataset.productHandle,this.max=4,this.products="",window.localStorage&&(e=window.localStorage.getItem("recently-viewed"))&&(window.recentlyViewedIds=JSON.parse(e))}connectedCallback(){this.buildUrl()}buildUrl(){let t=0;window.recentlyViewedIds.forEach(e=>{e===this.currentId||t>=this.max||(this.products+="handle:"+e+" OR ",t++)}),this.url=this.url+encodeURIComponent(this.products),this.fetchProducts()}fetchProducts(){fetch(this.url).then(e=>e.text()).then(e=>{var t=document.createElement("div"),e=(t.innerHTML=e,t.querySelector(".products"));e&&e.innerHTML.trim().length&&(this.container.innerHTML=e.innerHTML,this.classList.add("product-recommendations--loaded"))}).catch(e=>{console.error(e)})}}customElements.define("recently-viewed-products",a)}