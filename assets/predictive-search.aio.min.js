/*
Generated time: October 28, 2024 01:50
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("search-form")){class a extends HTMLElement{constructor(){super()}connectedCallback(){this.is_drawer=this.dataset.drawer,this.drawer=this.closest("#Search-Drawer"),this.form=this.querySelector("form"),this.button=document.querySelectorAll(".thb-quick-search"),this.input=this.querySelector(".search-field"),this.defaultTab=this.querySelector(".side-panel-content--initial"),this.predictiveSearchResults=this.querySelector(".thb-predictive-search"),this.cc=this.querySelector(".searchform--click-capture"),this.setupEventListeners()}setupEventListeners(){this.form.addEventListener("submit",this.onFormSubmit.bind(this)),this.input.addEventListener("input",debounce(e=>{this.onChange(e)},300).bind(this)),this.input.addEventListener("focus",debounce(e=>{this.onChange(e)},300).bind(this)),this.button.forEach((e,t)=>{e.addEventListener("click",e=>(e.preventDefault(),document.body.classList.add("open-cc"),this.is_drawer&&this.drawer.classList.add("active"),!1))}),this.cc?.addEventListener("click",this.close.bind(this)),document.addEventListener("keyup",e=>{e.code&&"ESCAPE"===e.code.toUpperCase()&&this.close()})}getQuery(){return this.input.value.trim()}onChange(){var e=this.getQuery();e.length?(this.is_drawer||this.open(),this.predictiveSearchResults.classList.add("active"),this.getSearchResults(e)):this.is_drawer||this.close()}onFormSubmit(e){this.getQuery().length||e.preventDefault()}onFocus(){var e=this.getQuery();e.length?this.getSearchResults(e):this.predictiveSearchResults.innerHTML=""}getSearchResults(e){this.predictiveSearchResults.classList.add("loading"),fetch(`${theme.routes.predictive_search_url}?q=${encodeURIComponent(e)}&${encodeURIComponent("resources[type]")}=product,article,query,page&${encodeURIComponent("resources[limit]")}=10&section_id=predictive-search`).then(e=>{if(this.predictiveSearchResults.classList.remove("loading"),e.ok)return e.text();throw new Error(e.status)}).then(e=>{e=(new DOMParser).parseFromString(e,"text/html").querySelector("#shopify-section-predictive-search").innerHTML;this.renderSearchResults(e)}).catch(e=>{throw e})}renderSearchResults(e){this.predictiveSearchResults.innerHTML=e,this.is_drawer||this.predictiveSearchResults.querySelector("#search-results-submit").classList.remove("button"),this.predictiveSearchResults.querySelector("#search-results-submit").addEventListener("click",()=>{this.form.submit()})}close(){console.log("close"),this.predictiveSearchResults.setAttribute("inert",""),document.body.classList.remove("open-search")}open(){document.body.classList.add("open-search"),this.predictiveSearchResults.removeAttribute("inert")}}customElements.define("search-form",a)}