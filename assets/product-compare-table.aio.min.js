/*
Generated time: October 28, 2024 01:50
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("product-compare-table")){class a extends HTMLElement{constructor(){super()}connectedCallback(){this.container=this.querySelector(".compare-lightbox--data"),this.addEventListeners()}addEventListeners(){this.addEventListener("render-product-compare-modal",this.renderTable.bind(this))}renderTable(){this.classList.add("loading"),this.handles=this.getCompareHandles(),this.fetchProducts()}getSelectedProducts(){return JSON.parse(window.localStorage.getItem("compare-products-vision"))||[]}getCompareHandles(){var e=new URL(window.location).searchParams,e=e.get("compare");return"string"==typeof e&&""!==e?e.split(","):[]}async fetchProducts(){let e=this.getSelectedProducts(),r="",a=[];await Promise.all(e.map(async t=>{await fetch(t.url+"?view=compare",{method:"GET"}).then(e=>e.text()).then(e=>{a[t.id]=this.getSectionInnerHTML(e,".compare-lightbox--data")})})).finally(()=>{this.classList.remove("loading")}),e.forEach((e,t)=>{r+=a[e.id]}),this.container.style.setProperty("--columns",e.length),this.container.innerHTML=r,this.equalHeights()}getSectionInnerHTML(e,t){return(new DOMParser).parseFromString(e,"text/html").querySelector(t).innerHTML}equalHeights(){for(let e=0;e<10;e++)this.equalizeTableRowHeightAcrossTables(e)}equalizeTableRowHeightAcrossTables(t){var e=this.container.querySelectorAll(".compare-lightbox--table");let r=[];e.forEach(e=>{var e=e.querySelectorAll(".compare-lightbox--row");e.length>t&&(e=e[t].clientHeight,0===r.length||e>r[t])&&(r[t]=e)}),e.forEach(e=>{e=e.querySelectorAll(".compare-lightbox--row");e.length>t&&(e[t].style.height=r[t]+"px")})}}customElements.define("product-compare-table",a)}